import{_ as i}from"./chunks/device_token_auth_display_demo.DGHCCXqo.js";import{_ as a,c as n,o as t,ag as e}from"./chunks/framework.BgId8OS5.js";const g=JSON.parse('{"title":"Система аутентификации Microsoft","description":"","frontmatter":{},"headers":[],"relativePath":"ruRU/projbobcat/authenticators/microsoft.md","filePath":"ruRU/projbobcat/authenticators/microsoft.md","lastUpdated":1770208428000}'),l={name:"ruRU/projbobcat/authenticators/microsoft.md"};function h(p,s,r,k,d,c){return t(),n("div",null,s[0]||(s[0]=[e(`<div style="display:none;" hidden="true" aria-hidden="true">Are you an LLM? You can read better optimized documentation at /ruRU/projbobcat/authenticators/microsoft.md for this page in Markdown format</div><h1 id="система-аутентификации-microsoft" tabindex="-1">Система аутентификации Microsoft <a class="header-anchor" href="#система-аутентификации-microsoft" aria-label="Permalink to &quot;Система аутентификации Microsoft&quot;">​</a></h1><nav class="table-of-contents"><ul><li><a href="#система-аутентификации-microsoft">Система аутентификации Microsoft</a><ul><li><a href="#подготовка">Подготовка</a><ul><li><a href="#настроика-метода-предоставления-кэшированных-учетных-данных">Настройка метода предоставления кэшированных учетных данных</a></li><li><a href="#настроика-метода-отображения-кода-аутентификации-потока-устроиства-при-первом-входе">Настройка метода отображения кода аутентификации потока устройства при первом входе</a></li></ul></li><li><a href="#инициализация-аутентификатора">Инициализация аутентификатора</a><ul><li><a href="#первая-аутентификация">Первая аутентификация</a></li><li><a href="#не-первая-аутентификация">Не первая аутентификация</a></li></ul></li><li><a href="#получение-результата-аутентификации-первая-аутентификация">Получение результата аутентификации (первая аутентификация)</a></li><li><a href="#получение-результата-аутентификации-не-первая-аутентификация">Получение результата аутентификации (не первая аутентификация)</a></li><li><a href="#интерпретация-результата-аутентификации">Интерпретация результата аутентификации</a><ul><li><a href="#неудачныи-результат-аутентификации">Неудачный результат аутентификации</a></li><li><a href="#успешныи-результат-аутентификации">Успешный результат аутентификации</a></li></ul></li></ul></li></ul></nav><p>Эта системы аутентификации реализует новый процесс аутентификации на основе Azure, который применим ко всем версиям Minecraft, которые в настоящее время обслуживаются.</p><h2 id="подготовка" tabindex="-1">Подготовка <a class="header-anchor" href="#подготовка" aria-label="Permalink to &quot;Подготовка&quot;">​</a></h2><p>Поскольку новый процесс аутентификации использует метод аутентификации на основе Azure. Поэтому, прежде чем начать, убедитесь, что вы завершили <a href="/ruRU/projbobcat/createNewAzureApp">конфигурацию приложения Azure</a>.</p><p>После завершения регистрации приложения Azure убедитесь, что вы завершили <a href="/ruRU/projbobcat/installationAndConfig#настройка-аутентификатора-входа-в-microsoft">инициализацию аутентификатора Microsoft</a> в точке входа программы.</p><h3 id="настроика-метода-предоставления-кэшированных-учетных-данных" tabindex="-1">Настройка метода предоставления кэшированных учетных данных <a class="header-anchor" href="#настроика-метода-предоставления-кэшированных-учетных-данных" aria-label="Permalink to &quot;Настройка метода предоставления кэшированных учетных данных&quot;">​</a></h3><p>Из-за особенностей этой системи аутентификации разработчикам необходимо сохранять <strong>токен обновления</strong> и <strong>время истечения срока действия</strong>, возвращаемые при первой аутентификации, чтобы помочь аутентификатору завершить аутентификацию. При аутентификации аутентификатор сначала вызовет этот метод, чтобы проверить действительность локального кэша токенов. Если локальный токен все еще действителен, результат аутентификации будет возвращен напрямую. Если токен, кэшированный локально, истек, разработчику необходимо вручную запросить новый токен, а затем вернуть обновленный токен.</p><p>Ниже мы приводим пример реализации этого метода:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark has-focused-lines vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GraphAuthResultModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?)&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CacheTokenProviderAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsNullOrEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(XBLToken)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsNullOrEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(XBLRefreshToken)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Рассчитать время истечения срока действия</span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> expireDate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LastRefreshedTime.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ExpiresIn); </span></span>
<span class="line"></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Если локальный кэшированный токен все еще действителен, вернуть текущий токен напрямую</span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // В противном случае используйте токен обновления для запроса нового токена</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (expireDate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DateTime.Now)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GraphAuthResultModel</span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ExpiresIn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)(expireDate </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DateTime.Now).TotalSeconds,  </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            AccessToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> XBLToken,  </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            RefreshToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> XBLRefreshToken </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }; </span></span>
<span class="line"></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  result); </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Запросить новый токен входа</span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshReqDic</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> List</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">KeyValuePair</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&gt; </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;client_id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  MicrosoftAuthenticator.ApiSettings.ClientId),  </span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;refresh_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  XBLRefreshToken),  </span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;grant_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;refresh_token&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }; </span></span>
<span class="line"></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshReq</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HttpRequestMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpMethod.Post,  MicrosoftAuthenticator.MSRefreshTokenRequestUrl) </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    { </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        Content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FormUrlEncodedContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshReqDic) </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    using</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshRes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SendAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshReq);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshContent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> refreshRes.Content.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ReadAsStringAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> refreshModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MicrosoftAuthenticator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ResolveMSGraphResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(refreshContent,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    GraphAuthResultModelContext.Default.GraphAuthResultModel);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (refreshModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GraphAuthResultModel</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> model</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (refreshModel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GraphResponseErrorModel</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        { </span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            // Обработка неудачной операции обновления здесь</span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        } </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  model);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h3 id="настроика-метода-отображения-кода-аутентификации-потока-устроиства-при-первом-входе" tabindex="-1">Настройка метода отображения кода аутентификации потока устройства при первом входе <a class="header-anchor" href="#настроика-метода-отображения-кода-аутентификации-потока-устроиства-при-первом-входе" aria-label="Permalink to &quot;Настройка метода отображения кода аутентификации потока устройства при первом входе&quot;">​</a></h3><p>Поскольку мы используем аутентификацию потока устройства для аутентификации учетной записи Microsoft игрока. Поэтому нам нужен дополнительный метод для отображения пользователю одноразового ключа и адреса аутентификации, необходимых для аутентификации потока устройства.</p><p>Ниже приведен пример этого метода:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DeviceTokenNotifier</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DeviceIdResponseModel</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deviceIdResponseModel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Отображение полученных данных обратного вызова на внешнем интерфейсе</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    DeviceCodeResponse </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deviceIdResponseModel;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>DeviceIdResponseModel</strong> содержит всю информацию, необходимую пользователю для завершения аутентификации:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Название</th><th style="text-align:center;">Действие</th></tr></thead><tbody><tr><td style="text-align:center;">UserCode</td><td style="text-align:center;">Ключ, необходимый для аутентификации пользователя</td></tr><tr><td style="text-align:center;">VerificationUri</td><td style="text-align:center;">Адрес аутентификации, который пользователи должны посетить для выполнения последующих шагов аутентификации</td></tr><tr><td style="text-align:center;">ExpiresIn</td><td style="text-align:center;">Время истечения срока действия кода аутентификации (секунды)</td></tr></tbody></table><p>Ниже вы можете увидеть пример интерфейса отображения:</p><p><img src="`+i+`" alt="device_token_demo"></p><p>В этом интерфейсе вам необходимо включить как минимум следующее содержимое:</p><ul><li>Ключ, необходимый для входа</li><li>Конкретный адрес аутентификации</li><li>Краткая подсказка по работе, чтобы помочь пользователям завершить операцию аутентификации</li></ul><h2 id="инициализация-аутентификатора" tabindex="-1">Инициализация аутентификатора <a class="header-anchor" href="#инициализация-аутентификатора" aria-label="Permalink to &quot;Инициализация аутентификатора&quot;">​</a></h2><h3 id="первая-аутентификация" tabindex="-1">Первая аутентификация <a class="header-anchor" href="#первая-аутентификация" aria-label="Permalink to &quot;Первая аутентификация&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Убедитесь, что вы подготовили <strong>метод отображения кода аутентификации потока устройства при первом входе</strong> перед выполнением следующего процесса, чтобы убедиться, что пользователи могут получить правильную информацию для первого входа!</p></div><p>Инициализация аутентификатора:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> microsoftAuthenticator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MicrosoftAuthenticator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LauncherAccountParser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launcherAccountParser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>В приведенном выше блоке кода замените эти параметры в соответствии с вашей реальной ситуацией:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Элемент</th><th style="text-align:center;">Описание</th></tr></thead><tbody><tr><td style="text-align:center;">launcherAccountParser</td><td style="text-align:center;">Для инициализации парсера учетных записей лаунчера см. здесь</td></tr></tbody></table><h3 id="не-первая-аутентификация" tabindex="-1">Не первая аутентификация <a class="header-anchor" href="#не-первая-аутентификация" aria-label="Permalink to &quot;Не первая аутентификация&quot;">​</a></h3><p>Не первая аутентификация — это использование кэша токенов, полученного при первой аутентификации, для вторичной аутентификации. В основном он проверяет, действительны ли локальные учетные данные через CacheTokenProviderAsync. Если токен, кэшированный локально, истек, он будет обновлен в этом методе.</p><p>Инициализация аутентификатора:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> microsoftAuthenticator</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MicrosoftAuthenticator</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    CacheTokenProvider </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CacheTokenProviderAsync,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Email </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;[EMAIL]&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LauncherAccountParser </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launcherAccountParser</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>В приведенном выше блоке кода замените эти параметры в соответствии с вашей реальной ситуацией:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Элемент</th><th style="text-align:center;">Описание</th></tr></thead><tbody><tr><td style="text-align:center;">launcherAccountParser</td><td style="text-align:center;">Для инициализации парсера учетных записей лаунчера см. здесь</td></tr><tr><td style="text-align:center;">[EMAIL]</td><td style="text-align:center;">Адрес электронной почты учетной записи аутентификации</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>Для инициализации <strong>launcherAccountParser</strong> (парсера игровых профилей) см. страницу <a href="/ruRU/projbobcat/additionalParsers/gameProfileParser">Парсер игровых профилей</a>.</p></div><h2 id="получение-результата-аутентификации-первая-аутентификация" tabindex="-1">Получение результата аутентификации (первая аутентификация) <a class="header-anchor" href="#получение-результата-аутентификации-первая-аутентификация" aria-label="Permalink to &quot;Получение результата аутентификации (первая аутентификация)&quot;">​</a></h2><p>После завершения инициализации системи аутентификации вам нужно только вызвать метод аутентификации аутентификатора Microsoft для первоначальной аутентификации учетной записи.</p><p>Ниже приведен пример кода аутентификации:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark has-focused-lines vp-code" tabindex="0"><code><span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Получить результат аутентификации</span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// DeviceTokenNotifier — это метод отображения информации, упомянутый ранее</span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> authResult</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> msAuth.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetMSAuthResult</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(DeviceTokenNotifier); </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (authResult </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Обработка неудачной аутентификации</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Разбор полей пользователя из токена Jwt</span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> claims</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> JwtTokenHelper.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetTokenInfo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(authResult.IdToken); </span></span>
<span class="line has-focus"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> claims.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TryGetValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;email&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">out</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> outEmail</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> outEmail </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsNullOrEmpty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(email))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Невозможно разобрать адрес электронной почты пользователя из учетных данных Jwt, рассматривается как сбой аутентификации</span></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Это, скорее всего, вызвано сбоем конфигурации приложения Azure или Scope</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Сохранение необходимой информации о пользователе на локальный диск для подготовки к следующей аутентификации</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> msInfoModel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MSAccountInfoModel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    XBLToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authResult.AccessToken, </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    XBLRefreshToken </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authResult.RefreshToken, </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ExpiresIn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> authResult.ExpiresIn, </span></span>
<span class="line has-focus"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Email </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> email </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="получение-результата-аутентификации-не-первая-аутентификация" tabindex="-1">Получение результата аутентификации (не первая аутентификация) <a class="header-anchor" href="#получение-результата-аутентификации-не-первая-аутентификация" aria-label="Permalink to &quot;Получение результата аутентификации (не первая аутентификация)&quot;">​</a></h2><p>После завершения инициализации системи аутентификации вам нужно только вызвать метод аутентификации аутентификатора Microsoft для завершения аутентификации учетной записи.</p><p>В асинхронном контексте используйте <strong>AuthTaskAsync</strong> для завершения аутентификации:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> authResult</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> microsoftAuthenticator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AuthTaskAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>В синхронном контексте используйте <strong>Auth</strong> для завершения аутентификации:</p><div class="language-c# vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> authResult</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> microsoftAuthenticator.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Auth</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="интерпретация-результата-аутентификации" tabindex="-1">Интерпретация результата аутентификации <a class="header-anchor" href="#интерпретация-результата-аутентификации" aria-label="Permalink to &quot;Интерпретация результата аутентификации&quot;">​</a></h2><p>После завершения метода аутентификации оно вернет результат аутентификации, который является объектом родительского типа <a href="https://github.com/Corona-Studio/ProjBobcat/blob/master/ProjBobcat/ProjBobcat/Class/Model/Auth/AuthResultBase.cs" target="_blank" rel="noreferrer">AuthResultBase</a>. Все результаты аутентификации содержат значение перечисления <strong>AuthStatus</strong>, которое напрямую указывает на успех или неудачу аутентификации. Ниже вы можете увидеть интерпретацию результата аутентификации:</p><h3 id="неудачныи-результат-аутентификации" tabindex="-1">Неудачный результат аутентификации <a class="header-anchor" href="#неудачныи-результат-аутентификации" aria-label="Permalink to &quot;Неудачный результат аутентификации&quot;">​</a></h3><p>Определив, является ли <strong>Error</strong> пустым, вы можете легко определить, является ли результат аутентификации, возвращенный системой аутентификации, действительным. Объект <strong>Error</strong> будет содержать следующие поля, чтобы сообщить вам некоторые подробности:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Поле</th><th style="text-align:center;">Описание</th></tr></thead><tbody><tr><td style="text-align:center;">authResult.Error.Cause</td><td style="text-align:center;">Конкретная причина проблемы</td></tr><tr><td style="text-align:center;">authResult.Error.Error</td><td style="text-align:center;">Название ошибки</td></tr><tr><td style="text-align:center;">authResult.Error.ErrorMessage</td><td style="text-align:center;">Подробная информация об ошибке, может содержать решение</td></tr></tbody></table><h3 id="успешныи-результат-аутентификации" tabindex="-1">Успешный результат аутентификации <a class="header-anchor" href="#успешныи-результат-аутентификации" aria-label="Permalink to &quot;Успешный результат аутентификации&quot;">​</a></h3><p>Если поле <strong>Error</strong> в результате аутентификации пусто, это означает, что эта аутентификация действительна. Успешный результат аутентификации будет содержать следующую информацию:</p><table tabindex="0"><thead><tr><th style="text-align:center;">Поле</th><th style="text-align:center;">Описание</th></tr></thead><tbody><tr><td style="text-align:center;">authResult.Id</td><td style="text-align:center;">Уникальный идентификатор этого имени пользователя, ProjBobcat использует определенный метод генерации для генерации этого идентификатора</td></tr><tr><td style="text-align:center;">authResult.AccessToken</td><td style="text-align:center;">Учетные данные авторизации учетной записи пользователя</td></tr><tr><td style="text-align:center;">authResult.Profiles</td><td style="text-align:center;">Список доступных ролей для пользователя, может содержать несколько доступных ролей</td></tr><tr><td style="text-align:center;">authResult.SelectedProfile</td><td style="text-align:center;">Текущая выбранная роль пользователя, это поле может быть пустым. Если оно пустое, пользователю необходимо предложить выбрать вручную.</td></tr><tr><td style="text-align:center;">authResult.User</td><td style="text-align:center;">Сводка информации об учетной записи пользователя, содержит некоторую основную информацию об учетной записи</td></tr><tr><td style="text-align:center;">authResult.LocalId</td><td style="text-align:center;">Локальный ID, обычно случайно сгенерированный UUID</td></tr><tr><td style="text-align:center;">authResult.RemoteId</td><td style="text-align:center;">Удаленный ID, возвращенный сервером аутентификации, обычно уникальный идентификатор пользователя</td></tr><tr><td style="text-align:center;">authResult.XBoxUid</td><td style="text-align:center;">XBox Live UID</td></tr><tr><td style="text-align:center;">authResult.Email</td><td style="text-align:center;">Адрес электронной почты, используемый для аутентификации</td></tr><tr><td style="text-align:center;">authResult.CurrentAuthTime</td><td style="text-align:center;">Текущее время аутентификации, <strong>разработчикам необходимо сохранить это поле, чтобы помочь подтвердить действительность локального кэшированного токена</strong></td></tr><tr><td style="text-align:center;">authResult.ExpiresIn</td><td style="text-align:center;">Время истечения срока действия токена (единица измерения: секунды), <strong>разработчикам необходимо сохранить это поле, чтобы помочь подтвердить действительность локального кэшированного токена</strong></td></tr><tr><td style="text-align:center;">authResult.RefreshToken</td><td style="text-align:center;">Токен обновления, <strong>разработчикам необходимо сохранить это поле, чтобы помочь обновить просроченные токены</strong></td></tr><tr><td style="text-align:center;">authResult.Skin</td><td style="text-align:center;">URL-адрес скина учетной записи пользователя</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Пожалуйста, используйте соответствующие ограничения или шифрование для безопасного хранения конфиденциальных данных, связанных с токенами пользователей. Утечка этой части данных может привести к потерям.</p></div>`,54)]))}const u=a(l,[["render",h]]);export{g as __pageData,u as default};
