import{_ as s,o as n,c as a,a as l}from"./app.82833893.js";const C=JSON.parse('{"title":"Quilt 安裝器","description":"","frontmatter":{},"headers":[{"level":2,"title":"實用資源","slug":"實用資源","link":"#實用資源","children":[]},{"level":2,"title":"相容性檢查","slug":"相容性檢查","link":"#相容性檢查","children":[]},{"level":2,"title":"獲取 Quilt Loader Model","slug":"獲取-quilt-loader-model","link":"#獲取-quilt-loader-model","children":[]},{"level":2,"title":"初始化安裝器","slug":"初始化安裝器","link":"#初始化安裝器","children":[]},{"level":2,"title":"開始安裝","slug":"開始安裝","link":"#開始安裝","children":[]},{"level":2,"title":"報告安裝進度","slug":"報告安裝進度","link":"#報告安裝進度","children":[]}],"relativePath":"zhTW/projbobcat/installers/quilt.md"}'),e={name:"zhTW/projbobcat/installers/quilt.md"},p=l(`<h1 id="quilt-安裝器" tabindex="-1">Quilt 安裝器 <a class="header-anchor" href="#quilt-安裝器" aria-hidden="true">#</a></h1><nav class="table-of-contents"><ul><li><a href="#quilt-安裝器">Quilt 安裝器</a><ul><li><a href="#實用資源">實用資源</a></li><li><a href="#相容性檢查">相容性檢查</a></li><li><a href="#獲取-quilt-loader-model">獲取 Quilt Loader Model</a></li><li><a href="#初始化安裝器">初始化安裝器</a></li><li><a href="#開始安裝">開始安裝</a></li><li><a href="#報告安裝進度">報告安裝進度</a></li></ul></li></ul></nav><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>請注意，ProjBobcat 僅實現了 Quilt 自動化安裝流程，您仍然需要自己實現 Quilt 安裝包的搜尋、下載、儲存流程。</p></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>Quilt 安裝器目前處於試驗階段，相關的 API 以及安裝流程可能會出現較大幅度的變更。</p></div><h2 id="實用資源" tabindex="-1">實用資源 <a class="header-anchor" href="#實用資源" aria-hidden="true">#</a></h2><ul><li><a href="https://quiltmc.org/en/" target="_blank" rel="noreferrer">Quilt 官方網站</a></li><li><a href="https://quiltmc.org/en/install/" target="_blank" rel="noreferrer">Quilt 安裝指南</a></li><li><a href="https://meta.quiltmc.org/" target="_blank" rel="noreferrer">Quilt Meta API</a></li></ul><h2 id="相容性檢查" tabindex="-1">相容性檢查 <a class="header-anchor" href="#相容性檢查" aria-hidden="true">#</a></h2><p>在開始安裝 Quilt 之前，您需要透過 Quilt Meta API 來查詢您將要修改的 MineCraft 版本是否受支援。</p><p>首先，您需要向 <a href="https://meta.quiltmc.org/v3/versions/game" target="_blank" rel="noreferrer">https://meta.quiltmc.org/v3/versions/game</a> 傳送一個 <strong>HTTP GET</strong> 請求。</p><p>您將看到類似下面的返回內容：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.19.3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">stable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.19.3-rc3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">stable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>在這裡，您需要檢查您即將要安裝的遊戲版本是否出現在 Quilt 官方的支援列表當中。 您需要將遊戲版本與 JSON 物件中的 <code>version</code> 欄位作比較。 <strong>如果您的遊戲沒有出現在支援列表當中，安裝將無法繼續。</strong></p><h2 id="獲取-quilt-loader-model" tabindex="-1">獲取 Quilt Loader Model <a class="header-anchor" href="#獲取-quilt-loader-model" aria-hidden="true">#</a></h2><p>由於 ProjBobcat 的 Quilt 安裝器要求您在初始化安裝器時提供來自 Quilt 的下載資訊。 因此，我們將在這裡簡要描述如何根據指定的 MineCraft 版本來獲取該資訊。</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>在該示例中，我們將使用 MineCraft 1.19.2 來向您展示如何獲取。</p></div><p>首先，您需要向 <a href="https://meta.quiltmc.org/v3/versions/loader" target="_blank" rel="noreferrer">https://meta.quiltmc.org/v3/versions/loader</a> 傳送一個 <strong>HTTP GET</strong> 請求。</p><p>您將看到類似下面的返回內容：</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">separator</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">.</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">build</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">maven</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">org.quiltmc:quilt-loader:0.18.1-beta.25</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0.18.1-beta.25</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Quilt Meta API 將返回一個 JSON 陣列，陣列中的每一個元素即是我們需要的 Loader Artifact。</p><h4 id="將-json-返回轉換為-projbobcat-型別" tabindex="-1">將 JSON 返回轉換為 ProjBobcat 型別 <a class="header-anchor" href="#將-json-返回轉換為-projbobcat-型別" aria-hidden="true">#</a></h4><p>如果您在您的專案中使用 <a href="https://www.newtonsoft.com/json" target="_blank" rel="noreferrer">JSON.NET</a>（Newtonsoft.JSON）。 您可以使用類似下面的程式碼來將您獲取到的伺服器響應轉換為對應的 ProjBobcat 型別：</p><div class="language-c# line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki material-theme-palenight has-focused-lines" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 從 Quilt Meta API 請求資料（示例，非實際程式碼）</span></span>
<span class="line"><span style="color:#A6ACCD;">...</span></span>
<span class="line"><span style="color:#F78C6C;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">responseJson</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">await</span><span style="color:#A6ACCD;"> res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Content</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ReadAsStringAsync</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#676E95;font-style:italic;">// 將 JSON 響應轉換為 ProjBobcat 型別 </span></span>
<span class="line has-focus"><span style="color:#F78C6C;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">artifacts</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> JsonConvert</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">DeserializeObject</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">QuiltLoaderModel</span><span style="color:#89DDFF;">&gt;&gt;(</span><span style="color:#A6ACCD;">responseJson</span><span style="color:#89DDFF;">);</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 獲取使用者想要安裝的版本（示例，非實際程式碼）</span></span>
<span class="line"><span style="color:#F78C6C;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">userSelect</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> vm</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SelectedArtifactIndex</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line has-focus"><span style="color:#676E95;font-style:italic;">// 獲取單個 Loader Artifact </span></span>
<span class="line has-focus"><span style="color:#F78C6C;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">selectedArtifact</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> artifacts</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">userSelect</span><span style="color:#89DDFF;">];</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>此處，<strong>selectedArtifact</strong> 即是 Fabric 安裝器所需要的 <code>QuiltLoaderModel</code>。</p><h2 id="初始化安裝器" tabindex="-1">初始化安裝器 <a class="header-anchor" href="#初始化安裝器" aria-hidden="true">#</a></h2><p>初始化 Quilt 安裝器的方式非常簡單。您需要使用到在先前步驟中取得的 <code>selectedArtifact</code> 來初始化安裝器：</p><div class="language-c# line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#F78C6C;">var</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">quiltInstaller</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">QuiltInstaller</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    InheritsFrom </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[MC_VERSION_OR_GAME_ID]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    RootPath </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[GAME_ROOT_PATH]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    CustomId </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[CUSTOM_INSTALL_GAME_ID]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    LoaderArtifact </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> selectedArtifact</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在上述程式碼塊中，請將這些引數按照您的實際情況替換：</p><table><thead><tr><th style="text-align:center;">專案</th><th style="text-align:center;">說明</th></tr></thead><tbody><tr><td style="text-align:center;">[GAME_ROOT_PATH]</td><td style="text-align:center;">遊戲根目錄，通常為 .minecraft 資料夾的路徑</td></tr><tr><td style="text-align:center;">[CUSTOM_INSTALL_GAME_ID]</td><td style="text-align:center;">可選項，自定義即將要安裝的遊戲的名稱</td></tr><tr><td style="text-align:center;">[MC_VERSION_OR_GAME_ID]</td><td style="text-align:center;">Forge 繼承的 MineCraft 原版遊戲版本，通常為遊戲版本。例如：1.19.2</td></tr></tbody></table><h2 id="開始安裝" tabindex="-1">開始安裝 <a class="header-anchor" href="#開始安裝" aria-hidden="true">#</a></h2><p>在您完成安裝器的初始化後，您只需要呼叫 Fabric 安裝器的安裝方法來完成安裝。</p><p>在非同步上下文中，使用 <strong>InstallTaskAsync</strong> 來完成安裝：</p><div class="language-c# line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">await</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">quiltInstaller</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">InstallTaskAsync</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在同步上下文中，使用 <strong>Install</strong> 來完成安裝：</p><div class="language-c# line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">quiltInstaller</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Install</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="報告安裝進度" tabindex="-1">報告安裝進度 <a class="header-anchor" href="#報告安裝進度" aria-hidden="true">#</a></h2><p>在某些情況下，Quilt 安裝器可能會需要數分鐘的時間來完成安裝。 因此，您可能需要實時向用戶彙報安裝器目前的進度。 為此，Quilt 安裝器提供了 <strong>StageChangedEventDelegate</strong> 事件來幫助您實現任務彙報。 您只需要簡單地在 <strong>開始安裝之前</strong> 註冊下面的事件：</p><div class="language-c# line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">quiltInstaller</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">StageChangedEventDelegate </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">_</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">args</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">ReportProgress</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">args</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Progress</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> args</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">CurrentStage</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其中， <strong>args.Progress</strong> 指示了安裝器當前的百分比進度。<strong>args.CurrentStage</strong> 則是安裝器當前進度的文字描述。</p>`,38),o=[p];function t(r,c,i,D,F,y){return n(),a("div",null,o)}const b=s(e,[["render",t]]);export{C as __pageData,b as default};
